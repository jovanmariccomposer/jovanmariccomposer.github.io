!function(a){function e(){var a=new XMLHttpRequest;a.onload=function(){if(a.response)for(var b=JSON.parse(a.response),c=0;c<b.length;c++)d[b[c].permalink]=b[c].tracks},a.open("get",c,!1),a.send()}function g(a,b,c){var d=document.createElement(a);return d.innerHTML=b,d.setAttribute(c[0],c[1]),d}function h(a,b){for(var c=a.parentNode.children,d=c.length-1;d>=0;d--)c[d]!=a&&c[d].hasAttribute(b)&&c[d].removeAttribute(b)}function i(a){var b=parseInt(a/1e3%60),c=parseInt(a/6e4%60);return c=c<10?"0"+c:c,b=b<10?"0"+b:b,c+":"+b}function j(){var a=this;a.playlists={},a.resetPlaylists=function(){for(var b=Object.keys(a.playlists),c=0;c<b.length;c++)a.playlists[b[c]].stop()},a.stopOtherPlaylists=function(b){for(var c=Object.keys(a.playlists),d=0;d<c.length;d++)c[d]!==b&&a.playlists[c[d]].stop()},a.register=function(b,c){return a.playlists.hasOwnProperty(b)||(a.playlists[b]=c),c}}function k(a,b){var c=this;c.statusCode={ready:0,active:1,buffering:2,error:3},c.playing=!1,c.active=null,c.tracks=b,c.container=a,c.description=function(){return c.container.getElementsByClassName("description")[0].getElementsByTagName("P")[0]}(),c.title=function(){return c.container.getElementsByClassName("description")[0].getElementsByTagName("H3")[0]}(),c.currentlyPlaying=function(){return c.container.getElementsByClassName("currentlyPlaying")[0]}(),c.placeholder=function(){return c.container.getElementsByClassName("placeholder")[0]}(),c.playerButton=function(){return c.container.getElementsByTagName("BUTTON")[0]},c.DOMScroll=null,c.callback=function(a){return a.target.hasAttribute("data-src")?a.target.hasAttribute("data-active")?(c.player.pause(),void a.target.removeAttribute("data-active")):(h(a.target,"data-active"),c.player.play(a.target.getAttribute("data-src")),void a.target.setAttribute("data-active",!0)):"BUTTON"==a.target.tagName?c.playing?void c.player.pause():null!==c.active?void c.player.continue():void(c.playing||(c.icon.innerHTML=c.svgTemplates.load,setTimeout(function(){c.player.play(0),c.DOMScroll.activate(0)},1e3))):void 0},c.svgTemplates={play:'<use xlink:href="#play" />',pause:'<use xlink:href="#pause" />',load:'<use xlink:href="#load" />'},c.init=function(a){var b=c.container.getElementsByClassName("audio-list")[0],d=b.getElementsByClassName("player")[0],e=b.getElementsByClassName("holder")[0],f=c.renderTemplate(c.tracks);c.title.textContent=function(a){var b=a.split("-")[0];return b.charAt(0).toUpperCase()+b.slice(1)}(a);var h='<svg class="icon">'+c.svgTemplates.play+"</svg>",i=g("button",h,["class","control"]);e.append(i),c.icon=e.getElementsByClassName("icon")[0];for(var j=g("div","",["class","list"]),k=0;k<f.length;k++)j.append(f[k]);d.append(j),c.audioElement=document.getElementById("hiddenPlayer"),c.DOMScroll=new t,c.DOMScroll.setup(d,f),n.register(a,c)},c.stop=function(){c.playing=!1,c.active=null,c.description.textContent="",c.currentlyPlaying.style.display="none",c.placeholder.style.display="block",c.DOMScroll.stopAll(),c.icon.innerHTML=c.svgTemplates.play},c.player={play:function(a){0==c.playing&&n.stopOtherPlaylists(),c.audioElement.setAttribute("src",c.tracks[a].stream_url+"?client_id=AxxKKJZojwz1G80t09Da2qsZIcd2XaGz"),c.description.textContent=c.tracks[a].description,c.currentlyPlaying.style.display="block",c.placeholder.style.display="none",c.currentlyPlaying.innerHTML=function(a,b){return["<span>Currently playing: "+a+"</span>",'<div class="waveWrapper">','<svg class="wave">','<rect id="wavebg" width="100%" height="50" />','<rect id="playedbg" class="playedbg" width="0" height="50">',"</svg>",'<div class="overlay" style="mask-image:url(\''+b+"');"," mask:url('"+b+"');"," -webkit-mask-image:url('"+b+"');\"></div>",'<svg class="tracker">','<rect id="tracker" class="cursor" x="0" y="0" width="2" height="70" />',"</svg>","</div>"].join("")}(c.tracks[a].title,c.tracks[a].waveform_url),c.playerCursor.init(c.tracks[a].duration),c.audioElement.addEventListener("ended",function(a){c.playerCursor.moveToStart(),c.playing=!1,c.icon.innerHTML=c.svgTemplates.play}),c.audioElement.addEventListener("pause",function(a){c.playerCursor.stopMoving()}),c.audioElement.addEventListener("playing",function(a){c.playerCursor.startMoving()}),c.playing=!0,c.active=a,c.DOMScroll.alignPlayed(a),c.icon.innerHTML=c.svgTemplates.pause,c.audioElement.play()},pause:function(){c.playing=!1,c.icon.innerHTML=c.svgTemplates.play,c.audioElement.pause()},next:function(){return c.tracks.length!=c.active.index&&void c.player.play(c.tracks[c.active.index+1])},continue:function(){c.playing=!0,c.icon.innerHTML=c.svgTemplates.pause,c.audioElement.play()},stop:function(){c.stop(),c.audioeElement.stop()}},c.playerCursor={wrapper:function(){return c.currentlyPlaying.getElementsByClassName("waveWrapper")[0]},cursor:function(){return c.currentlyPlaying.getElementsByClassName("cursor")[0]},played:function(){return c.currentlyPlaying.getElementsByClassName("playedbg")[0]},startWidth:0,endWidth:0,init:function(a){var b=c.playerCursor.wrapper();c.playerCursor.cursor(),c.playerCursor.played();c.playerCursor.endWidth=b.offsetWidth,c.playerCursor.frames=500,c.playerCursor.time=a},moveToStart:function(){var a=c.playerCursor.cursor(),b=c.playerCursor.played();a.setAttribute("x",0),b.setAttribute("width",0)},startMoving:function(){var a=c.playerCursor.cursor(),b=c.playerCursor.played(),d=Math.floor(c.playerCursor.endWidth/c.playerCursor.frames),e=a.getAttribute("x");c.playerCursor.move=setInterval(function(){e<=c.playerCursor.endWidth&&(a.setAttribute("x",e+d),b.setAttribute("width",e+d),e++)},Math.floor(c.playerCursor.time/c.playerCursor.endWidth))},stopMoving:function(){clearInterval(c.playerCursor.move)}},c.renderTemplate=function(a){for(var b=[],c=0;c<a.length;c++){var d=document.createElement("div"),e=g("span",a[c].title,["class","trackTitle"]),f=g("span",i(a[c].duration),["class","trackLength"]);d.append(e),d.append(f),d.classList.add("trackPlayer"),d.classList.add("control"),d.setAttribute("data-src",c),b.push(d)}return b}}function t(){var a=this;a.height=400,a.trackHeight=65,a.segments={active:0,scrollIndex:0,chunkSize:6,scrollSize:2,chunks:[]},a.tracklist=null,a.totalTracks=0,a.loadPrevButton=function(){var a=document.createElement("a");return a.classList.add("linebutton"),a.classList.add("prev"),a.innerHTML='<svg class="linebutton"><use xlink:href="#prevButton" /></svg>',a}(),a.loadNextButton=function(){var a=document.createElement("a");return a.classList.add("linebutton"),a.classList.add("next"),a.innerHTML='<svg class="linebutton"><use xlink:href="#nextButton" /></svg>',a}(),a.calculateOffset=function(b){var c=a.height/2-Math.floor(a.trackHeight/2),d=parseInt(a.tracklist.style.top),e=b*a.trackHeight+d;return 0-(e-c)},a.activate=function(b){a.tracklist.children[b].setAttribute("data-active",!0)},a.stopAll=function(){for(var b=a.tracklist.children,c=0;c<b.length;c++)b[c].removeAttribute("data-active")},a.setup=function(b,c){a.tracklist=b.getElementsByClassName("list")[0],a.tracklist.style.top=0,a.segmentTracks(c),a.totalTracks=c.length,b.append(a.loadNextButton),b.prepend(a.loadPrevButton),a.loadPrevButton.setAttribute("data-active",!1),a.loadPrevButton.addEventListener("click",a.loadPrev),a.loadNextButton.addEventListener("click",a.loadNext),a.totalTracks<=a.segments.chunkSize&&a.loadNextButton.setAttribute("data-active",!1)},a.alignPlayed=function(b){if(b<a.totalTracks){var c=a.calculateOffset(b);a.segments.scrollIndex=b,a.findChunk(b)!==a.segments.active&&(a.segments.active=a.segments.active-1),a.toggleButtonActive(),a.animate(c,a.tracklist,function(a,b){b.style.top=parseInt(b.style.top)+a+"px"})}},a.segmentTracks=function(b){var c,d,e,f=a.segments.chunkSize;for(c=0,d=b.length;c<d;c+=f)e=b.slice(c,c+f),a.segments.chunks.push(e)},a.toggleButtonActive=function(){a.segments.active>0?a.loadPrevButton.setAttribute("data-active",!0):a.segments.scrollIndex>0?a.loadPrevButton.setAttribute("data-active",!0):a.loadPrevButton.setAttribute("data-active",!1),a.segments.active<a.segments.chunks.length&&a.segments.scrollIndex<a.totalTracks-a.segments.scrollSize?a.loadNextButton.setAttribute("data-active",!0):a.loadNextButton.setAttribute("data-active",!1)},a.loadPrev=function(b){if("false"==b.target.getAttribute("data-active"))return!1;var c=a.segments.scrollIndex-a.segments.scrollSize;a.findChunk(c)!==a.segments.active&&(a.segments.active=a.segments.active-1),a.segments.scrollIndex=c,a.toggleButtonActive(),a.animate(a.segments.scrollSize*a.trackHeight,a.tracklist,function(a,b){b.style.top=parseInt(b.style.top)+a+"px"})},a.findChunk=function(b){return Math.ceil(b/a.segments.chunkSize)-1},a.loadNext=function(b){if("false"==b.target.getAttribute("data-active"))return!1;if(a.segments.active<a.segments.chunks.length){var c=a.segments.scrollIndex+a.segments.scrollSize;a.findChunk(c)!==a.segments.active&&(a.segments.active=a.segments.active+1),a.segments.scrollIndex=c}a.toggleButtonActive(),a.animate(a.segments.scrollSize*a.trackHeight,a.tracklist,function(a,b){b.style.top=parseInt(b.style.top)-a+"px"})},a.animate=function(a,b,c){var i,d=a,e=30,f=0,g=500,h=Math.floor(d/e);i=setInterval(function(){f<e?c(h,b):clearInterval(i),f++},Math.floor(g/e))}}var c="http://api.soundcloud.com/users/290078921/playlists?client_id=AxxKKJZojwz1G80t09Da2qsZIcd2XaGz",d={},l=g("audio",null,["id","hiddenPlayer"]);document.body.append(l),e();for(var m=Object.keys(d),n=new j,o=0;o<m.length;o++){var p=document.getElementById(m[o]);if(null!==p){var q=new k(p,d[m[o]]);q.init(m[o]);for(var r=p.getElementsByClassName("control"),s=0;s<r.length;s++)r[s].addEventListener("click",q.callback)}}}(window);